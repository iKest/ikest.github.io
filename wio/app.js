(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(g,b,i){g.exports=i(19)},12:function(g,b,i){var L=i(13),l=i(14);l=l.__esModule?l.default:l,typeof l=="string"&&(l=[[g.i,l,""]]);var e={};e.insert="head",e.singleton=!1;var k=L(l,e);g.exports=l.locals||{}},14:function(g,b,i){},19:function(g,b,i){"use strict";i.r(b);var L=i(12),l=i(0),e=i.n(l),k=i(1),m=i.n(k),O=i(4),A=i.n(O),G=i(3),P=i.n(G),j=i(10),D=i(9),M=i(8);const N={type:e.a.AUTO,disableContextMenu:!0,render:{transparent:!0},scale:{parent:"gameContainer",mode:e.a.Scale.NONE,width:"100%",height:"100%",expandParent:!1}},C=(()=>{const t=[];let n=!1;const o=()=>{n||(n=!0,window.requestAnimationFrame?window.requestAnimationFrame(h):setTimeout(h,66))},h=()=>{t.forEach(function(r){r()}),n=!1},a=r=>{r&&t.push(r)};return{add:r=>{t.length||window.addEventListener("resize",o),a(r)}}})(),E=function(){var t,n,o,h,a,r;const c=document.createElement("canvas").getContext("2d"),w=(t=window.devicePixelRatio)!=null?t:1,x=(r=(a=(h=(o=(n=c.webkitBackingStorePixelRatio)!=null?n:c.mozBackingStorePixelRatio)!=null?o:c.msBackingStorePixelRatio)!=null?h:c.oBackingStorePixelRatio)!=null?a:c.backingStorePixelRatio)!=null?r:1,f=w/x;return f>1?f:1}();class S extends e.a.Scene{constructor(t){super(t);this.key=t.key,this.log=m.a.get(this.key),this.log.info("boot")}init(){this.log.info("init"),this.events.once("shutdown",this.shutdown,this),this.events.once("sleep",this.sleep,this),this.events.once("pause",this.pause,this),this.events.off("destroy",this.destroy,this),this.scale.on("resize",this.resize,this)}shutdown(){this.log.info("shutdown"),this.scale.off("resize",this.resize,this),this.events.off("sleep",this.sleep,this),this.events.off("pause",this.pause,this),this.events.once("destroy",this.destroy,this)}sleep(){this.log.info("sleep"),this.events.off("pause",this.pause,this),this.events.once("wake",this.wake,this)}pause(){this.log.info("pause"),this.events.once("resume",this.resume,this)}wake(){this.log.info("wake"),this.events.once("sleep",this.sleep,this),this.events.once("pause",this.pause,this)}resume(){this.log.info("resume"),this.events.once("pause",this.pause,this)}destroy(){this.log.info("destroy"),this.scale.off("resize",this.resize,this),this.events.off("sleep",this.sleep,this),this.events.off("pause",this.pause,this),this.events.off("shutdown",this.shutdown,this),this.log=void 0}resize(t,n,o,h){const{width:a,height:r}=t;this.cameras.resize(a,r)}}class U extends S{constructor(){super({key:"BootScene"})}create(){this.log.info("create"),this.load.rexWebFont({google:{families:["Roboto"]}}),this.load.image("level_bg_tile","assets/images/backgrounddetailed2.png"),this.load.image("restart","assets/images/restart.png"),this.load.spritesheet("spider","assets/sprites/spider.png",{frameWidth:120,frameHeight:148,startFrame:0,endFrame:18}),this.load.on("complete",()=>{this.anims.create({key:"walk",frames:"spider",frameRate:19,repeat:-1}),document.querySelector(".loader").classList.toggle("loaded"),this.scene.start("LevelScene")}),this.load.start()}}var z=i(7),B=i.n(z),J=i(18);const X=.005,T=.001;class F extends S{constructor(){super({key:"LevelScene"});this.currentPointer=null,this.isWalk=!1,this.currentRotation=0,this.crash=new B.a,this.points=[],this.inside=!0,this.drawing=!1}create(){this.log.info("create");const{centerX:t,centerY:n,width:o,height:h}=this.cameras.main;this.bg=this.add.tileSprite(t,n,o+1e3,h+1e3,"level_bg_tile").setOrigin(.5).setScrollFactor(0),this.web=this.createWeb(0,0,300,50),this.webGraphics=this.add.graphics(0,0),this.webGraphics.lineStyle(4,15713599,1),this.webGraphics.fillStyle(10053375),this.webGraphics.beginPath(),this.webGraphics.moveTo(this.web[0].x,this.web[0].y);for(let a=1;a<this.web.length;a++)this.webGraphics.lineTo(this.web[a].x,this.web[a].y);this.webGraphics.closePath(),this.webGraphics.fillPath(),this.webGraphics.strokePath(),this.graphics=this.add.graphics(0,0),this.graphics.lineStyle(16,65280,.5),this.spider=this.add.sprite(0,0,"spider").play("walk").setRotation(this.currentRotation+Math.PI*.5),this.path=this.add.path(this.spider.x,this.spider.y),this.cameras.main.startFollow(this.spider,!0),this.bg.x=t-this.cameras.main.scrollX%500,this.bg.y=n-this.cameras.main.scrollY%500,this.joystick=this.rexVirtualJoystick.add(this,{x:0,y:0,radius:100,base:this.add.circle(0,0,100,16777215,.5),thumb:this.add.circle(0,0,50,2290649224,.5),fixed:!0,enable:!1}).setVisible(!1).on("update",this.dumpJoyStickState,this),this.restartBtn=this.rexButtonn.add(this.add.image(o-10,10,"restart").setScale(.4).setOrigin(1,0).setScrollFactor(0)).setEnable(!0).on("click",()=>{this.restartGame()}),this.crash.onCollision(this.onCollision.bind(this)),this.input.on("pointerdown",this.pressDown,this),this.input.on("pointerup",this.pressUp,this)}createWeb(t,n,o,h){const a=new e.a.Geom.Circle(t,n,o);return a.getPoints(!1,h)}resize(t,n,o,h){super.resize(t,n,o,h);const{width:a,height:r,centerX:c,centerY:w}=this.cameras.main;this.bg.setSize(a+1e3,r+1e3).setOrigin(.5),this.restartBtn.gameObject.setPosition(a-10,10),this.bg.x=c-this.cameras.main.scrollX%500,this.bg.y=w-this.cameras.main.scrollY%500}dumpJoyStickState(){}pressDown(t){if(this.currentPointer!==null)return;this.currentPointer=t;const{x:n,y:o}=t;this.joystick.setPosition(n,o).setVisible(!0).setEnable(!0)}pressUp(t){if(this.currentPointer!==t)return;this.currentPointer=null,this.joystick.setVisible(!1).setEnable(!1)}restartGame(){this.log.info("click restart"),this.scene.restart()}onCollision(t,n,o){this.log.info("collide"),this.graphics.clear(),this.graphics.lineStyle(16,65280,.5),this.crash.clear(),this.firstSegment=!0}update(t,n){if(this.joystick.force===0)return;const o=Math.abs(e.a.Math.Angle.ShortestBetween(this.joystick.angle,e.a.Math.RadToDeg(this.currentRotation)));if(o!==0){const s=n*X*this.joystick.force,p=s<o?s:o;this.currentRotation=e.a.Math.Angle.RotateTo(this.currentRotation,this.joystick.rotation,p/o),this.spider.rotation=this.currentRotation+Math.PI*.5}let{x:h,y:a}=this.spider;const r=n*this.joystick.force*T*Math.cos(this.currentRotation),c=n*this.joystick.force*T*Math.sin(this.currentRotation);this.spider.x+=r,this.spider.y+=c;const{centerX:w,centerY:x}=this.cameras.main;this.bg.x=w-this.cameras.main.scrollX%500,this.bg.y=x-this.cameras.main.scrollY%500;const f=new e.a.Geom.Line(h,a,this.spider.x,this.spider.y),u=new e.a.Geom.Point;let d=!1;if(this.inside){for(let s=0;s<this.web.length;s++){const p=s+1<this.web.length?this.web[s+1]:this.web[0],v=new e.a.Geom.Line(this.web[s].x,this.web[s].y,p.x,p.y);if(d=e.a.Geom.Intersects.LineToLine(f,v,u),d)break}d&&(this.log.info("intersect"),this.inside=!1,this.drawing=!0,this.points.push(e.a.Geom.Point.Clone(u)),h=u.x,a=u.y)}else{for(let s=0;s<this.web.length;s++){const p=s+1<this.web.length?this.web[s+1]:this.web[0],v=new e.a.Geom.Line(this.web[s].x,this.web[s].y,p.x,p.y);if(d=e.a.Geom.Intersects.LineToLine(f,v,u),d)break}if(d){if(this.log.info("intersect"),this.drawing){this.graphics.clear(),this.graphics.lineStyle(16,65280,.5),this.points.push(e.a.Geom.Point.Clone(u)),this.webGraphics.beginPath(),this.webGraphics.moveTo(this.points[0].x,this.points[0].y);for(let s=1;s<this.points.length;s++)this.webGraphics.lineTo(this.points[s].x,this.points[s].y);this.webGraphics.closePath(),this.webGraphics.fillPath(),this.webGraphics.strokePath(),this.points.length=0}this.inside=!0,this.drawing=!1}}if(this.drawing)if(this.graphics.lineBetween(h,a,this.spider.x,this.spider.y),this.points.length>3){for(let s=0;s<this.points.length-2;s++){const p=new e.a.Geom.Line(this.points[s].x,this.points[s].y,this.points[s+1].x,this.points[s+1].y);if(d=e.a.Geom.Intersects.LineToLine(f,p,u),d)break}d?(this.log.info("intersect"),this.graphics.clear(),this.graphics.lineStyle(16,65280,.5),this.points.length=0,this.drawing=!1):this.points.push(new e.a.Geom.Point(this.spider.x,this.spider.y))}else this.points.push(new e.a.Geom.Point(this.spider.x,this.spider.y))}shutdown(){this.crash.clear(),this.input.off("pointerdown",this.pressDown,this),this.input.off("pointerup",this.pressUp,this),this.restartBtn.off("click"),this.joystick.off("update",this.dumpJoyStickState,this),super.shutdown()}}var R=Object.assign;A.a.disablePageScroll(),m.a.useDefaults(),m.a.setLevel(m.a.OFF);const y=m.a.get("index");y.info("start");const I={global:[{key:"rexWebFontLoader",plugin:j.a,start:!0},{key:"rexButtonn",plugin:D.a,start:!0,mapping:"rexButtonn"},{key:"rexVirtualJoystick",plugin:M.a,start:!0,mapping:"rexVirtualJoystick"}],scene:[]};window.onload=()=>{window.game=new e.a.Game(R(R({},N),{plugins:I,scene:[U,F],callbacks:{preBoot:t=>{y.info("game booting start")},postBoot:t=>{y.info("game booting complete"),window.scrollTo(0,1),t.scale.resize(window.innerWidth*E,P()()*E),C.add(()=>{t.scale.resize(window.innerWidth*E,P()()*E)})}}}))}}},[[11,1,2]]]);
