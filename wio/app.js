(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(c,p,e){c.exports=e(14)},function(c,p,e){var y=e(12),r=e(13);r=r.__esModule?r.default:r,typeof r=="string"&&(r=[[c.i,r,""]]);var n={};n.insert="head",n.singleton=!1;var v=y(r,n);c.exports=r.locals||{}},,function(c,p,e){},function(c,p,e){"use strict";e.r(p);var y=e(11),r=e(0),n=e.n(r),v=e(1),d=e.n(v),b=e(4),S=e.n(b),O=e(3),x=e.n(O),T=e(9),L=e(8),A=e(7);const j={type:n.a.AUTO,disableContextMenu:!0,render:{transparent:!0,autoResize:!1},scale:{parent:"gameContainer",mode:n.a.Scale.RESIZE,autoCenter:n.a.Scale.CENTER_BOTH,width:"100%",height:"100%",expandParent:!1}},D=(()=>{const t=[];let s=!1;const i=()=>{s||(s=!0,window.requestAnimationFrame?window.requestAnimationFrame(a):setTimeout(a,66))},a=()=>{t.forEach(function(o){o()}),s=!1},h=o=>{o&&t.push(o)};return{add:o=>{t.length||window.addEventListener("resize",i),h(o)}}})(),g=function(){var t,s,i,a,h,o;const l=document.createElement("canvas").getContext("2d"),m=(t=window.devicePixelRatio)!=null?t:1,E=(o=(h=(a=(i=(s=l.webkitBackingStorePixelRatio)!=null?s:l.mozBackingStorePixelRatio)!=null?i:l.msBackingStorePixelRatio)!=null?a:l.oBackingStorePixelRatio)!=null?h:l.backingStorePixelRatio)!=null?o:1,u=m/E;return u>1?u:1}();class w extends n.a.Scene{constructor(t){super(t);this.key=t.key,this.log=d.a.get(this.key),this.log.info("boot")}init(){this.log.info("init"),this.events.once("shutdown",this.shutdown,this),this.events.once("sleep",this.sleep,this),this.events.once("pause",this.pause,this),this.events.off("destroy",this.destroy,this),this.scale.on("resize",this.resize,this)}shutdown(){this.log.info("shutdown"),this.scale.off("resize",this.resize,this),this.events.off("sleep",this.sleep,this),this.events.off("pause",this.pause,this),this.events.once("destroy",this.destroy,this)}sleep(){this.log.info("sleep"),this.events.off("pause",this.pause,this),this.events.once("wake",this.wake,this)}pause(){this.log.info("pause"),this.events.once("resume",this.resume,this)}wake(){this.log.info("wake"),this.events.once("sleep",this.sleep,this),this.events.once("pause",this.pause,this)}resume(){this.log.info("resume"),this.events.once("pause",this.pause,this)}destroy(){this.log.info("destroy"),this.scale.off("resize",this.resize,this),this.events.off("sleep",this.sleep,this),this.events.off("pause",this.pause,this),this.events.off("shutdown",this.shutdown,this),this.log=void 0}resize(t,s,i,a){const{width:h,height:o}=t;this.cameras.resize(h,o)}}class M extends w{constructor(){super({key:"BootScene"})}create(){this.log.info("create"),this.load.rexWebFont({google:{families:["Roboto"]}}),this.load.image("level_bg_tile","assets/images/backgrounddetailed2.png"),this.load.image("restart","assets/images/restart.png"),this.load.spritesheet("spider","assets/sprites/spider.png",{frameWidth:120,frameHeight:148,startFrame:0,endFrame:18}),this.load.on("complete",()=>{this.anims.create({key:"walk",frames:"spider",frameRate:19,repeat:-1}),document.querySelector(".loader").classList.toggle("loaded"),this.scene.start("LevelScene")}),this.load.start()}}const N=.005,k=.001;class P extends w{constructor(){super({key:"LevelScene"});this.currentPointer=null,this.isWalk=!1,this.currentRotation=0}create(){this.log.info("create");const{centerX:t,centerY:s,width:i,height:a}=this.cameras.main;this.bg=this.add.tileSprite(t,s,i+1e3,a+1e3,"level_bg_tile").setOrigin(.5).setScrollFactor(0),this.graphics=this.add.graphics(0,0),this.spider=this.add.sprite(0,0,"spider").play("walk").setRotation(this.currentRotation+Math.PI*.5),this.path=this.add.path(this.spider.x,this.spider.y),this.cameras.main.startFollow(this.spider,!0),this.bg.x=t-this.cameras.main.scrollX%500,this.bg.y=s-this.cameras.main.scrollY%500,this.joystick=this.rexVirtualJoystick.add(this,{x:0,y:0,radius:100,base:this.add.circle(0,0,100,16777215,.5),thumb:this.add.circle(0,0,50,2290649224,.5),fixed:!0,enable:!1}).setVisible(!1).on("update",this.dumpJoyStickState,this),this.restartBtn=this.rexButtonn.add(this.add.image(i-10,10,"restart").setScale(.4).setOrigin(1,0).setScrollFactor(0)).setEnable(!0).on("click",()=>{this.restartGame()}),this.input.on("pointerdown",this.pressDown,this),this.input.on("pointerup",this.pressUp,this)}resize(t,s,i,a){super.resize(t,s,i,a);const{width:h,height:o}=this.cameras.main;this.bg.setSize(h+1e3,o+1e3).setOrigin(.5),this.restartBtn.gameObject.setPosition(h-10,10)}dumpJoyStickState(){}pressDown(t){if(this.currentPointer!==null)return;this.currentPointer=t;const{x:s,y:i}=t;this.joystick.setPosition(s,i).setVisible(!0).setEnable(!0)}pressUp(t){if(this.currentPointer!==t)return;this.currentPointer=null,this.joystick.setVisible(!1).setEnable(!1)}restartGame(){this.log.info("click restart"),this.scene.restart()}update(t,s){if(this.joystick.force===0)return;const i=Math.abs(n.a.Math.Angle.ShortestBetween(this.joystick.angle,n.a.Math.RadToDeg(this.currentRotation)));if(i!==0){const u=s*N*this.joystick.force,C=u<i?u:i;this.currentRotation=n.a.Math.Angle.RotateTo(this.currentRotation,this.joystick.rotation,C/i),this.spider.rotation=this.currentRotation+Math.PI*.5}const{x:a,y:h}=this.spider,o=s*this.joystick.force*k*Math.cos(this.currentRotation),l=s*this.joystick.force*k*Math.sin(this.currentRotation);this.spider.x+=o,this.spider.y+=l;const{centerX:m,centerY:E}=this.cameras.main;this.bg.x=m-this.cameras.main.scrollX%500,this.bg.y=E-this.cameras.main.scrollY%500,this.graphics.lineStyle(16,65280,.5),this.graphics.lineBetween(a,h,this.spider.x,this.spider.y)}shutdown(){this.crash.clear(),this.input.off("pointerdown",this.pressDown,this),this.input.off("pointerup",this.pressUp,this),this.restartBtn.off("click"),this.joystick.off("update",this.dumpJoyStickState,this),super.shutdown()}}var R=Object.assign;S.a.disablePageScroll(),d.a.useDefaults(),d.a.setLevel(d.a.OFF);const f=d.a.get("index");f.info("start");const z={global:[{key:"rexWebFontLoader",plugin:T.a,start:!0},{key:"rexButtonn",plugin:L.a,start:!0,mapping:"rexButtonn"},{key:"rexVirtualJoystick",plugin:A.a,start:!0,mapping:"rexVirtualJoystick"}],scene:[]};window.onload=()=>{window.game=new n.a.Game(R(R({},j),{plugins:z,scene:[M,P],callbacks:{preBoot:t=>{f.info("game booting start")},postBoot:t=>{f.info("game booting complete"),window.scrollTo(0,1),t.scale.resize(window.innerWidth*g,x()()*g),D.add(()=>{t.scale.resize(window.innerWidth*g,x()()*g)})}}}))}}],[[10,1,2]]]);
