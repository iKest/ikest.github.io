(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(h,n,e){h.exports=e(20)},17:function(h,n,e){var r=e(18),s=e(19);s=s.__esModule?s.default:s,typeof s=="string"&&(s=[[h.i,s,""]]);var i={};i.insert="head",i.singleton=!1;var d=r(s,i);h.exports=s.locals||{}},19:function(h,n,e){},20:function(h,n,e){"use strict";e.r(n);var r=e(17),s=e(2),i=e.n(s),d=e(5),o=e.n(d),u=e(7),c=e.n(u),f=e(12),w=e(13),v=e(14),m=e(10),E=e(11),x=e(15);const y={type:i.a.AUTO,disableContextMenu:!0,render:{transparent:!0},scale:{parent:"gameContainer",mode:i.a.Scale.FIT,autoCenter:i.a.Scale.CENTER_BOTH,width:860,height:1136,expandParent:!1},physics:{default:"matter",matter:{debug:!1,gravity:{x:0,y:0}}}};class p extends i.a.Scene{constructor(t){super(t);this.key=t.key,this.log=o.a.get(this.key),this.log.info("boot")}init(){this.log.info("init"),this.events.once("shutdown",this.shutdown,this),this.events.once("sleep",this.sleep,this),this.events.once("pause",this.pause,this),this.events.off("destroy",this.destroy,this)}shutdown(){this.log.info("shutdown"),this.events.off("sleep",this.sleep,this),this.events.off("pause",this.pause,this),this.events.once("destroy",this.destroy,this)}sleep(){this.log.info("sleep"),this.events.off("pause",this.pause,this),this.events.once("wake",this.wake,this)}pause(){this.log.info("pause"),this.events.once("resume",this.resume,this)}wake(){this.log.info("wake"),this.events.once("sleep",this.sleep,this),this.events.once("pause",this.pause,this)}resume(){this.log.info("resume"),this.events.once("pause",this.pause,this)}destroy(){this.log.info("destroy"),this.events.off("sleep",this.sleep,this),this.events.off("pause",this.pause,this),this.events.off("shutdown",this.shutdown,this),this.log=void 0}}class L extends p{constructor(){super({key:"BootScene"})}create(){this.log.info("create"),this.load.rexWebFont({google:{families:["Roboto"]}}),this.load.json("hands","assets/jsons/hands.json"),this.load.json("levels","assets/jsons/levelData.json"),this.load.multiatlas("atlas","assets/atlases/atlas.json","assets/atlases/"),this.load.on("complete",()=>{document.querySelector(".loader").classList.toggle("loaded"),this.scene.start("LevelScene")}),this.load.start()}}class A extends p{constructor(){super({key:"LevelScene"})}init(){this.levels=this.cache.json.get("levels"),this.level=1,this.patternPosition=0}create(){this.log.info("create");const{centerX:t,centerY:a,width:P,height:j}=this.cameras.main;this.bg=this.add.image(t,a,"atlas","pirate_bg"),this.arc=this.add.image(t,a+160,"atlas","arc without glow");const T=new i.a.Curves.CubicBezier({x:this.arc.x-.5*this.arc.width+.39*.1*this.arc.width,y:this.arc.y-.5*this.arc.height+(1-1.86/7.6)*this.arc.height},{x:this.arc.x-.5*this.arc.width+3.76*.1*this.arc.width,y:this.arc.y-.5*this.arc.height+(1-9.47/7.6)*this.arc.height},{x:this.arc.x-.5*this.arc.width+6.18*.1*this.arc.width,y:this.arc.y-.5*this.arc.height+(1-8.95/7.6)*this.arc.height},{x:this.arc.x-.5*this.arc.width+9.663*.1*this.arc.width,y:this.arc.y-.5*this.arc.height+(1-.317/7.6)*this.arc.height});this.path=this.add.path(),this.path.add(T),this.glows=new Map([["glow1",this.add.image(this.arc.x-this.arc.width*.5+465+119*.5,this.arc.y-this.arc.height*.5+262+187*.5,"atlas","01").setAlpha(0)],["glow2",this.add.image(this.arc.x-this.arc.width*.5+382+141*.5,this.arc.y-this.arc.height*.5+97+206*.5,"atlas","02").setAlpha(0)],["glow3",this.add.image(this.arc.x-this.arc.width*.5+265+166*.5,this.arc.y-this.arc.height*.5-11+162*.5,"atlas","03").setAlpha(0)],["glow4",this.add.image(this.arc.x-this.arc.width*.5+122+163*.5,this.arc.y-this.arc.height*.5-12+144*.5,"atlas","04").setAlpha(0)],["glow5",this.add.image(this.arc.x-this.arc.width*.5+53+110*.5,this.arc.y-this.arc.height*.5+74+149*.5,"atlas","05").setAlpha(0)],["glow6",this.add.image(this.arc.x-this.arc.width*.5-15+122*.5,this.arc.y-this.arc.height*.5+189+177*.5,"atlas","06").setAlpha(0)]]),this.dot=this.add.image(0,0,"atlas","red dot"),this.pathFollower=this.rexPathFollower.add(this.dot,{path:this.path,t:1,rotateToPath:!1,rotationOffset:0,angleOffset:0}),this.hand=this.add.image(t,a+210,"atlas","pirate"),this.shake=this.rexShakePosition.add(this.hand,{mode:1,duration:100,magnitude:10,magnitudeMode:1}),this.knife=this.add.image(0,0,"atlas","pirate_knife").setOrigin(48/1e3,572/1350).setScale(.9).setAngle(-25),this.pathTween=this.tweens.add({targets:[this.pathFollower],t:0,ease:"Linear",duration:3e3,repeat:-1,onUpdate:()=>{this.knife.setPosition(this.dot.x,this.dot.y-120)},yoyo:!0}),this.tap=this.rexGestures.add.tap({enable:!0,time:10,tapInterval:10,threshold:9,tapOffset:10}).on("tappingstart",this.tapHeader,this),this.start()}update(){}start(){this.showGlow(this.getLevel(this.level).pattern[this.patternPosition])}getLevel(t){return this.levels[`level_${t}`]}showGlow(t){this.tweens.add({targets:[this.glows.get(`glow${t}`)],alpha:1,diration:50})}hideGlow(t){this.tweens.add({targets:[this.glows.get(`glow${t}`)],alpha:0,diration:50})}getInterval(){const t=this.pathFollower.t;return t>.9148?1:t>.7336&&t<.784?2:t>.535&&t<.5838?3:t>.3253&&t<.3836?4:t>.174&&t<.2055?5:t<.065?6:0}tapHeader(){this.pathTween.pause(),this.tweens.add({targets:[this.knife],y:this.dot.y,duration:100,yoyo:!0,onStart:()=>{this.tap.setEnable(!1)},onYoyo:()=>{const t=this.getInterval();let a=this.getLevel(this.level).pattern;t===0?this.shake.shake():t===Number(a[this.patternPosition])&&(this.hideGlow(a[this.patternPosition]),++this.patternPosition<a.length?this.showGlow(a[this.patternPosition]):(this.level++,this.patternPosition=0,a=this.getLevel(this.level).pattern,this.showGlow(a[this.patternPosition]),this.log.info("next level",this.level,this.getLevel(this.level).pattern.length)))},onComplete:()=>{this.pathTween.resume(),this.tap.setEnable(!0)}})}pressUp(t){if(this.currentPointer!==t)return;this.currentPointer=null}shutdown(){this.crash.clear(),this.input.off("pointerdown",this.pressDown,this),this.input.off("pointerup",this.pressUp,this),this.tap.off("tap",this.tapHeader,this),super.shutdown()}}var g=Object.assign;c.a.disablePageScroll(),o.a.useDefaults(),o.a.setLevel(o.a.OFF);const l=o.a.get("index");l.info("start");const O={global:[{key:"rexShakePosition",plugin:x.a,start:!0,mapping:"rexShakePosition"},{key:"rexPathFollower",plugin:v.a,start:!0,mapping:"rexPathFollower"},{key:"rexContainerLitePlugin",plugin:E.a,start:!0},{key:"rexWebFontLoader",plugin:f.a,start:!0},{key:"rexButtonn",plugin:w.a,start:!0,mapping:"rexButtonn"}],scene:[{key:"rexGestures",plugin:m.a,mapping:"rexGestures"}]};window.onload=()=>{window.game=new i.a.Game(g(g({},y),{plugins:O,scene:[L,A],callbacks:{preBoot:t=>{l.info("game booting start")},postBoot:t=>{l.info("game booting complete")}}}))}}},[[16,1,2]]]);
