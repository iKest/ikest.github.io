window.__require=function t(e,o,n){function r(a,c){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var u=o[a]={exports:{}};e[a][0].call(u.exports,function(t){return r(e[a][1][t]||t)},u,u.exports,t,e,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e){"use strict";var o=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,o){this.fn=t,this.context=e,this.once=o||!1}function a(t,e,o,r,a){if("function"!=typeof o)throw new TypeError("The listener must be a function");var c=new i(o,r||t,a),s=n?n+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],c]:t._events[s].push(c):(t._events[s]=c,t._eventsCount++),t}function c(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)o.call(t,e)&&r.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},s.prototype.listeners=function(t){var e=n?n+t:t,o=this._events[e];if(!o)return[];if(o.fn)return[o.fn];for(var r=0,i=o.length,a=new Array(i);r<i;r++)a[r]=o[r].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,o=this._events[e];return o?o.fn?1:o.length:0},s.prototype.emit=function(t,e,o,r,i,a){var c=n?n+t:t;if(!this._events[c])return!1;var s,l,u=this._events[c],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,o),!0;case 4:return u.fn.call(u.context,e,o,r),!0;case 5:return u.fn.call(u.context,e,o,r,i),!0;case 6:return u.fn.call(u.context,e,o,r,i,a),!0}for(l=1,s=new Array(h-1);l<h;l++)s[l-1]=arguments[l];u.fn.apply(u.context,s)}else{var p,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,o);break;case 4:u[l].fn.call(u[l].context,e,o,r);break;default:if(!s)for(p=1,s=new Array(h-1);p<h;p++)s[p-1]=arguments[p];u[l].fn.apply(u[l].context,s)}}return!0},s.prototype.on=function(t,e,o){return a(this,t,e,o,!1)},s.prototype.once=function(t,e,o){return a(this,t,e,o,!0)},s.prototype.removeListener=function(t,e,o,r){var i=n?n+t:t;if(!this._events[i])return this;if(!e)return c(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||r&&!a.once||o&&a.context!==o||c(this,i);else{for(var s=0,l=[],u=a.length;s<u;s++)(a[s].fn!==e||r&&!a[s].once||o&&a[s].context!==o)&&l.push(a[s]);l.length?this._events[i]=1===l.length?l[0]:l:c(this,i)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&c(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,void 0!==e&&(e.exports=s)},{}],2:[function(t,e,o){(function(t){(function(t,e){"function"==typeof define&&define.amd?define([],e):void 0!==o?e():(e(),t.FileSaver={})})(this,function(){"use strict";function o(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function n(t,e,o){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){c(n.response,e,o)},n.onerror=function(){console.error("could not download file")},n.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof t&&t.global===t?t:void 0,c=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(t,e,o){var c=a.URL||a.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?i(s):r(s.href)?n(t,e,o):i(s,s.target="_blank")):(s.href=c.createObjectURL(t),setTimeout(function(){c.revokeObjectURL(s.href)},4e4),setTimeout(function(){i(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,a){if(e=e||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(o(t,a),e);else if(r(t))n(t,e,a);else{var c=document.createElement("a");c.href=t,c.target="_blank",setTimeout(function(){i(c)})}}:function(t,e,o,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,o);var i="application/octet-stream"===t.type,c=/constructor/i.test(a.HTMLElement)||a.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&c)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},l.readAsDataURL(t)}else{var u=a.URL||a.webkitURL,h=u.createObjectURL(t);r?r.location=h:location.href=h,r=null,setTimeout(function(){u.revokeObjectURL(h)},4e4)}});a.saveAs=c.saveAs=c,void 0!==e&&(e.exports=c)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e){(function(t){"use strict";var o,n={VERSION:"1.6.0"},r={},i=function(t,e){return function(){return e.apply(t,arguments)}},a=function(){var t,e,o=arguments,n=o[0];for(e=1;e<o.length;e++)for(t in o[e])t in n||!o[e].hasOwnProperty(t)||(n[t]=o[e][t]);return n},c=function(t,e){return{value:t,name:e}};n.TRACE=c(1,"TRACE"),n.DEBUG=c(2,"DEBUG"),n.INFO=c(3,"INFO"),n.TIME=c(4,"TIME"),n.WARN=c(5,"WARN"),n.ERROR=c(8,"ERROR"),n.OFF=c(99,"OFF");var s=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};s.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},trace:function(){this.invoke(n.TRACE,arguments)},debug:function(){this.invoke(n.DEBUG,arguments)},info:function(){this.invoke(n.INFO,arguments)},warn:function(){this.invoke(n.WARN,arguments)},error:function(){this.invoke(n.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(n.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(n.TIME,[t,"end"])},invoke:function(t,e){o&&this.enabledFor(t)&&o(e,a({level:t},this.context))}};var l,u=new s({filterLevel:n.OFF});(l=n).enabledFor=i(u,u.enabledFor),l.trace=i(u,u.trace),l.debug=i(u,u.debug),l.time=i(u,u.time),l.timeEnd=i(u,u.timeEnd),l.info=i(u,u.info),l.warn=i(u,u.warn),l.error=i(u,u.error),l.log=l.info,n.setHandler=function(t){o=t},n.setLevel=function(t){for(var e in u.setLevel(t),r)r.hasOwnProperty(e)&&r[e].setLevel(t)},n.getLevel=function(){return u.getLevel()},n.get=function(t){return r[t]||(r[t]=new s(a({name:t},u.context)))},n.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,e){e.name&&t.unshift("["+e.name+"]")};var e={},o=function(t,e){Function.prototype.apply.call(t,console,e)};return"undefined"==typeof console?function(){}:function(r,i){r=Array.prototype.slice.call(r);var a,c=console.log;i.level===n.TIME?(a=(i.name?"["+i.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(a):e[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):o(c,[a+": "+((new Date).getTime()-e[a])+"ms"])):(i.level===n.WARN&&console.warn?c=console.warn:i.level===n.ERROR&&console.error?c=console.error:i.level===n.INFO&&console.info?c=console.info:i.level===n.DEBUG&&console.debug?c=console.debug:i.level===n.TRACE&&console.trace&&(c=console.trace),t.formatter(r,i),o(c,r))}},n.useDefaults=function(t){n.setLevel(t&&t.defaultLevel||n.DEBUG),n.setHandler(n.createDefaultHandler(t))},"function"==typeof define&&define.amd?define(n):void 0!==e&&e.exports?e.exports=n:(n._prevLogger=t.Logger,n.noConflict=function(){return t.Logger=n._prevLogger,n},t.Logger=n)})(this)},{}],FSM:[function(t,e,o){"use strict";cc._RF.push(e,"bcec44FUzNK+Zx1i2fudi5z","FSM"),o.__esModule=!0,o.FSM=void 0;var n,r=(n=t("eventemitter3"))&&n.__esModule?n:{default:n},i=t("./objects/GetValue.js");function a(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(t){var e,o;function n(e){var o;o=t.call(this)||this;var n=(0,i.GetValue)(e,"states",void 0);n&&o.addStates(n);var r=(0,i.GetValue)(e,"extend",void 0);if(r)for(var a in r)o.hasOwnProperty(a)&&void 0!==o[a]||(o[a]=r[a]);return o._stateLock=!1,o.resetFromJSON(e),o}o=t,(e=n).prototype=Object.create(o.prototype),e.prototype.constructor=e,e.__proto__=o;var r,c,s=n.prototype;return s.shutdown=function(){this.removeAllListeners()},s.destroy=function(){this.shutdown()},s.resetFromJSON=function(t){this.setEnable((0,i.GetValue)(t,"enable",!0)),this.start((0,i.GetValue)(t,"start",void 0));var e=(0,i.GetValue)(t,"init",void 0);return e&&e.call(this),this},s.toJSON=function(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}},s.setEnable=function(t){return void 0===t&&(t=!0),this.enable=t,this},s.start=function(t){return this._start=t,this._prevState=void 0,this._state=t,this},s.goto=function(t){return null!=t&&(this.state=t),this},s.next=function(){var t,e=this["next_"+this.state];return e&&(t="string"==typeof e?e:e.call(this)),this.goto(t),this},s.addState=function(t,e){var o=(0,i.GetValue)(e,"next",void 0);o&&(this["next_"+t]=o);var n=(0,i.GetValue)(e,"exit",void 0);n&&(this["exit_"+t]=n);var r=(0,i.GetValue)(e,"enter",void 0);return r&&(this["enter_"+t]=r),this},s.addStates=function(t){for(var e in t)this.addState(e,t[e]);return this},s.update=function(t,e,o){void 0===o&&(o="update");var n=this[o+"_"+this.state];n&&n.call(this,t,e)},s.preupdate=function(t,e){this.update(t,e,"preupdate")},s.postupdate=function(t,e){this.update(t,e,"postupdate")},r=n,(c=[{key:"state",set:function(t){if(this.enable&&!this._stateLock&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),null!=this._prevState){var e="exit_"+this._prevState,o=this[e];o&&o.call(this),this.emit(e,this)}if(this._stateLock=!1,null!=this._state){var n="enter_"+this._state,r=this[n];r&&r.call(this),this.emit(n,this)}}},get:function(){return this._state}},{key:"prevState",get:function(){return this._prevState}}])&&a(r.prototype,c),n}(r.default);o.FSM=c,cc._RF.pop()},{"./objects/GetValue.js":"GetValue",eventemitter3:1}],GetValue:[function(t,e,o){"use strict";cc._RF.push(e,"5257aG2UVZJHaPzJfqaPQ3c","GetValue"),o.__esModule=!0,o.GetValue=void 0,o.GetValue=function(t,e,o){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(-1!==e.indexOf(".")){for(var n=e.split("."),r=t,i=o,a=0;a<n.length;a++){if(!r.hasOwnProperty(n[a])){i=o;break}i=r[n[a]],r=r[n[a]]}return i}return o}return o},cc._RF.pop()},{}],OnePointerTracer1:[function(t,e,o){"use strict";cc._RF.push(e,"4596aOOcphN4qpGZ1XDu4SM","OnePointerTracer1");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0}),o.OnePointerTracer=void 0;var c=a(t("js-logger")),s=0,l=cc._decorator,u=l.ccclass,h=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tracerState=s,e.lastPointer=null,e.movedState=!1,e.isTouchingAnyObject=!1,e.log=c.default.get("OnePointerTracer"),e}return r(e,t),e.prototype.onLoad=function(){this.log.info("onLoad")},e.prototype.start=function(){this.log.info("start")},e.prototype.onPointerDown=function(t,e){this.enable&&void 0===this.pointer&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=1,void 0===this.gameObject&&(this.isTouchingAnyObject=e.length>0),this.onDragStart())},e.prototype.onPointerUp=function(t){this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=s,this.onDragEnd())},e.prototype.onPointerMove=function(t){if(this.enable&&t.isDown){var e=!this.bounds||this.bounds.contains(t.x,t.y),o=this.pointer===t;!o&&e||(o&&!e?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}},e.prototype.dragCancel=function(){return 1===this.tracerState&&this.onDragEnd(),this.pointer=void 0,this.tracerState=s,this},e.prototype.onDragStart=function(){this.node.emit("dragstart",this)},e.prototype.onDragEnd=function(){this.node.emit("dragend",this)},e.prototype.onDrag=function(){this.node.emit("drag",this)},e.prototype.setRecongizedStateObject=function(t){return this.recongizedState=t,this},Object.defineProperty(e.prototype,"state",{get:function(){return this.recongizedState.state},set:function(t){this.recongizedState.state=t},enumerable:!1,configurable:!0}),e.prototype.cancel=function(){return this.state="IDLE",this},i([h(cc.Boolean)],e.prototype,"enable",void 0),i([u],e)}(cc.Component);o.OnePointerTracer=p,cc._RF.pop()},{"js-logger":3}],OnePointerTracer:[function(t,e,o){"use strict";cc._RF.push(e,"1e6c9NxkUlDvZFhjW56Lmmx","OnePointerTracer"),o.__esModule=!0,o.OnePointerTracer=void 0;var n,r=(n=t("eventemitter3"))&&n.__esModule?n:{default:n};function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=0,c=function(t){var e,o;function n(e){var o;return(o=t.call(this)||this).node=e,o._enable=!0,o.tracerState=a,o.touch=void 0,o.lastTouch=void 0,o.movedState=!1,o.boot(),o}o=t,(e=n).prototype=Object.create(o.prototype),e.prototype.constructor=e,e.__proto__=o;var r,c,s=n.prototype;return s.boot=function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchmove",this.onTouchMove,this)},s.shutdown=function(){this.node.off("touchstart",this.onTouchStart,this),this.node.off("touchend",this.onTouchEnd,this),this.node.off("touchmove",this.onTouchMove,this),this.node=void 0,this.touch=void 0,this.lastTouch=void 0,this.movedState=!1,this.removeAllListeners()},s.destroy=function(){this.shutdown()},s.setEnable=function(t){return void 0===t&&(t=!0),this.enable=t,this},s.toggleEnable=function(){return this.setEnable(!this.enable),this},s.onTouchStart=function(t){var e=t.touch;this.enable&&void 0===this.touch&&(this.touch=e,this.lastTouch=e,this.movedState=!1,this.tracerState=1,this.onDragStart())},s.onTouchEnd=function(t){var e=t.touch;this.enable&&this.touch.getID()===e.getID()&&(this.touch=void 0,this.movedState=!1,this.tracerState=a,this.onDragEnd())},s.onTouchMove=function(t){if(this.enable){var e=t.touch;if(this.touch.getID()===e.getID()){if(!this.movedState){var o=e.getStartLocation();this.movedState=e.getLocationX()!==o.x||e.getLocationY()!==o.y}this.movedState&&this.onDrag(t.getTouches().length)}}},s.dragCancel=function(){return 1===this.tracerState&&this.onDragEnd(),this.touch=void 0,this.tracerState=a,this},s.onDragStart=function(){this.emit("dragstart",this)},s.onDragEnd=function(){this.emit("dragend",this)},s.onDrag=function(t){this.emit("drag",this,t)},s.setRecongizedStateObject=function(t){return this.recongizedState=t,this},s.cancel=function(){return this.state="IDLE",this},r=n,(c=[{key:"enable",get:function(){return this._enable},set:function(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}},{key:"state",get:function(){return this.recongizedState.state},set:function(t){this.recongizedState.state=t}}])&&i(r.prototype,c),n}(r.default);o.OnePointerTracer=c,cc._RF.pop()},{eventemitter3:1}],Pan:[function(t,e,o){"use strict";cc._RF.push(e,"abae31yrJ9Lcp/v1PPY0WGM","Pan"),o.__esModule=!0,o.Pan=void 0;var n=t("../onePointerTracer/OnePointerTracer.js"),r=t("../utils/FSM.js");function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var c="IDLE",s=function(t){var e,o;function n(e){var o,n=a(o=t.call(this,e)||this),i={states:{IDLE:{},BEGIN:{enter:function(){var t=n.touch;n.startWorld=t.getLocation(),n.startView=t.getLocationInView(),n.start=n.node.convertToNodeSpaceAR(t.getLocation())}},RECOGNIZED:{enter:function(){n.emit("panstart",n,n.node,n.lastTouch)},exit:function(){var t=n.lastTouch;n.endWorld=t.getLocation(),n.endView=t.getLocationInView(),n.end=n.node.convertToNodeSpaceAR(t.getLocation()),n.emit("panend",n,n.node,n.lastTouch)}}},init:function(){this.state=c},eventEmitter:!1};return o.dragThreshold=0,o.setRecongizedStateObject(new r.FSM(i)),o}o=t,(e=n).prototype=Object.create(o.prototype),e.prototype.constructor=e,e.__proto__=o;var s,l,u=n.prototype;return u.onDragStart=function(){this.state="BEGIN",0===this.dragThreshold&&(this.state="RECOGNIZED")},u.onDragEnd=function(){this.state=c},u.onDrag=function(t){switch(this.state){case"BEGIN":this.touch.getDelta()>=this.dragThreshold&&(this.state="RECOGNIZED");break;case"RECOGNIZED":var e=this.touch.getLocation(),o=this.touch.getPreviousLocation();this.dx=e.x-o.x,this.dy=e.y-o.y;var n=this.touch;this.worldLocation=n.getLocation(),this.previosWorldLocation=this.touch.getPreviousLocation(),this.viewLocation=n.getLocationInView(),this.location=this.node.convertToNodeSpaceAR(n.getLocation()),this.emit("pan",this,t,this.node,this.lastTouch)}},u.setDragThreshold=function(t){return this.dragThreshold=t,this},u.destroy=function(){this.recongizedState.destroy(),t.prototype.destroy.call(this)},s=n,(l=[{key:"isPan",get:function(){return"RECOGNIZED"===this.state}}])&&i(s.prototype,l),n}(n.OnePointerTracer);o.Pan=s,cc._RF.pop()},{"../onePointerTracer/OnePointerTracer.js":"OnePointerTracer","../utils/FSM.js":"FSM"}],ProcessScene:[function(t,e,o){"use strict";cc._RF.push(e,"2403fgZ+MdB3aqICachiIH0","ProcessScene");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var c=a(t("js-logger")),s=t("../globalController"),l=t("../Gestures/pan/Pan.js");c.default.useDefaults();var u=cc._decorator,h=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gesturesLayer=null,e.UI=null,e.image=null,e.workSpace=null,e.zoomInButton=null,e.zoomOutButton=null,e.controlButton=null,e.transformButton=null,e.rotateButton=null,e.helpButton=null,e.resetButton=null,e.cutButton=null,e.backButton=null,e.processButton=null,e.helpNode=null,e.helpMouse=null,e.helpTouch=null,e.normalBgFrame=null,e.grayBgFrame=null,e.translateEnable=null,e.translateDisable=null,e.scaleEnable=null,e.scaleDisable=null,e.rotateEnable=null,e.rotateDisable=null,e.zoomInEnable=null,e.zoomInDisable=null,e.zoomOutEnable=null,e.zoomOutDisable=null,e.resetEnable=null,e.resetDisable=null,e.cutEnable=null,e.cutDisable=null,e.log=c.default.get("Process Scene"),e.canTranslate=!0,e.canScale=!0,e.canRotate=!0,e.canCut=!1,e.baseScale=1,e.keyDown=null,e.keys=new Map,e.initialAngle=0,e}return r(e,t),e.prototype.onLoad=function(){this.log.info("load"),cc.sys.platform===cc.sys.DESKTOP_BROWSER?(this.helpMouse.active=!0,this.helpTouch.active=!1):(this.helpMouse.active=!1,this.helpTouch.active=!0);var t=this.image.getComponent(cc.Sprite),e=new cc.SpriteFrame(s.GlobalController.texture);t.spriteFrame=e,this.image.setContentSize(e.getOriginalSize()),this.image.setScale(s.GlobalController.currentScale),this.image.setAnchorPoint(s.GlobalController.currentAnchorPoint),this.image.angle=s.GlobalController.currentAngle},e.prototype.start=function(){this.log.info("start"),this.image.setPosition(0,0),this.checkReset()},e.prototype.mouseDown=function(t){this.keyDown=t.getButton()},e.prototype.mouseUp=function(){this.keyDown=null},e.prototype.onKeyDown=function(t){this.keys.set(t.keyCode,!0)},e.prototype.onKeyUp=function(t){this.keys.delete(t.keyCode)},e.prototype.clickBack=function(){this.backButton.getComponent(cc.Button).interactable=!1,cc.director.loadScene("Upload Scene")},e.prototype.clickProcess=function(){this.processButton.getComponent(cc.Button).interactable=!1,s.GlobalController.currentAnchorPoint.set(this.image.getAnchorPoint()),s.GlobalController.currentAngle=this.image.angle,this.image.getScale(s.GlobalController.currentScale),this.log.info(this.image.anchorX,this.image.anchorY,this.image.width,this.image.height,this.image.x,this.image.y),cc.director.loadScene("Save Scene")},e.prototype.helpOpen=function(){this.disableUI(),this.helpNode.active=!0,cc.tween(this.helpNode).show().start()},e.prototype.helpClose=function(){var t=this;this.enableUI(),cc.tween(this.helpNode).hide().call(function(){t.helpNode.active=!1}).start()},e.prototype.toggleTranslate=function(){this.canTranslate=!this.canTranslate;var t=this.controlButton.target.getComponent(cc.Sprite),e=this.controlButton.target.getChildByName("Icon").getComponent(cc.Sprite);this.canTranslate?(t.spriteFrame=this.normalBgFrame,e.spriteFrame=this.translateEnable):(t.spriteFrame=this.grayBgFrame,e.spriteFrame=this.translateDisable)},e.prototype.toggleScale=function(){this.canScale=!this.canScale;var t=this.transformButton.target.getComponent(cc.Sprite),e=this.transformButton.target.getChildByName("Icon").getComponent(cc.Sprite);this.canScale?(t.spriteFrame=this.normalBgFrame,e.spriteFrame=this.scaleEnable):(t.spriteFrame=this.grayBgFrame,e.spriteFrame=this.scaleDisable)},e.prototype.toggleRotate=function(){this.canRotate=!this.canRotate;var t=this.rotateButton.target.getComponent(cc.Sprite),e=this.rotateButton.target.getChildByName("Icon").getComponent(cc.Sprite);this.canRotate?(t.spriteFrame=this.normalBgFrame,e.spriteFrame=this.rotateEnable):(t.spriteFrame=this.grayBgFrame,e.spriteFrame=this.rotateDisable)},e.prototype.toggleCut=function(){this.canCut=!this.canCut;var t=this.cutButton.target.getComponent(cc.Sprite),e=this.cutButton.target.getChildByName("Icon").getComponent(cc.Sprite),o=this.workSpace.getComponent(cc.Mask);this.canCut?(t.spriteFrame=this.grayBgFrame,e.spriteFrame=this.cutDisable,o.enabled=!0):(t.spriteFrame=this.normalBgFrame,e.spriteFrame=this.cutEnable,o.enabled=!1)},e.prototype.zoomIn=function(){var t=this;this.baseScale*=1.2,this.zoomInButton.interactable=!1,this.zoomOutButton.interactable=!1,cc.tween(this.workSpace).to(.1,{scale:this.baseScale}).call(function(){var e=t.zoomInButton.target.getComponent(cc.Sprite),o=t.zoomOutButton.target.getComponent(cc.Sprite),n=t.zoomInButton.target.getChildByName("Icon").getComponent(cc.Sprite),r=t.zoomOutButton.target.getChildByName("Icon").getComponent(cc.Sprite);t.zoomOutButton.interactable||(t.zoomOutButton.interactable=!0,o.spriteFrame=t.normalBgFrame,r.spriteFrame=t.zoomOutEnable),t.baseScale>=5?(t.zoomInButton.interactable=!1,e.spriteFrame=t.grayBgFrame,n.spriteFrame=t.zoomInDisable):t.zoomInButton.interactable=!0}).start()},e.prototype.zoomOut=function(){var t=this;this.baseScale*=.8,this.zoomInButton.interactable=!1,this.zoomOutButton.interactable=!1,cc.tween(this.workSpace).to(.1,{scale:this.baseScale}).call(function(){var e=t.zoomInButton.target.getComponent(cc.Sprite),o=t.zoomOutButton.target.getComponent(cc.Sprite),n=t.zoomInButton.target.getChildByName("Icon").getComponent(cc.Sprite),r=t.zoomOutButton.target.getChildByName("Icon").getComponent(cc.Sprite);t.zoomInButton.interactable||(t.zoomInButton.interactable=!0,e.spriteFrame=t.normalBgFrame,n.spriteFrame=t.zoomInEnable),t.baseScale<=1?(t.zoomOutButton.interactable=!1,o.spriteFrame=t.grayBgFrame,r.spriteFrame=t.zoomOutDisable):t.zoomOutButton.interactable=!0}).start()},e.prototype.enableUI=function(){this.UI.active=!0,cc.tween(this.UI).show().start()},e.prototype.disableUI=function(){var t=this;cc.tween(this.UI).hide().call(function(){t.UI.active=!1}).start()},e.prototype.onEnable=function(){this.log.info("enable"),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.gesturesLayer.on(cc.Node.EventType.MOUSE_DOWN,this.mouseDown,this),this.gesturesLayer.on(cc.Node.EventType.MOUSE_UP,this.mouseUp,this),this.gesturesLayer.on(cc.Node.EventType.MOUSE_WHEEL,this.mouseWheel,this),this.gesturesLayer.on(cc.Node.EventType.TOUCH_START,this.disableUI,this),this.gesturesLayer.on(cc.Node.EventType.TOUCH_END,this.enableUI,this),this.gesturesLayer.on(cc.Node.EventType.TOUCH_CANCEL,this.enableUI,this),this.pan=new l.Pan(this.gesturesLayer),this.pan.on("panstart",this.panStart,this),this.pan.on("pan",this.panProcess,this),this.pan.on("panend",this.panEnd,this)},e.prototype.onDisable=function(){this.log.info("disable"),this.pan.destroy(),this.pan=void 0,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.gesturesLayer.off(cc.Node.EventType.MOUSE_DOWN,this.mouseDown,this),this.gesturesLayer.off(cc.Node.EventType.MOUSE_UP,this.mouseUp,this),this.gesturesLayer.off(cc.Node.EventType.MOUSE_WHEEL,this.mouseWheel,this),this.gesturesLayer.off(cc.Node.EventType.TOUCH_START,this.disableUI,this),this.gesturesLayer.off(cc.Node.EventType.TOUCH_END,this.enableUI,this),this.gesturesLayer.off(cc.Node.EventType.TOUCH_CANCEL,this.enableUI,this)},e.prototype.mouseWheel=function(t){if(this.canScale){var e=t.getScrollY(),o=.05;this.keys.has(cc.macro.KEY.shift)?o=.2:this.keys.has(cc.macro.KEY.ctrl)&&(o=.01);var n=this.image.scale+Math.sign(e)*o;n<.1?n=.1:n>10&&(n=10),this.image.scale=n,this.checkReset()}},e.prototype.panStart=function(){this.log.info("start"),this.initialAngle=this.image.angle},e.prototype.panProcess=function(t,e){if(!(e>1))if(2===this.keyDown&&this.canRotate){var o=t.location.signAngle(t.start)*(180/Math.PI);this.image.angle=this.initialAngle-o,this.checkReset()}else if(this.canTranslate){var n=this.image.anchorX*this.image.width*this.image.scaleX,r=this.image.anchorY*this.image.height*this.image.scaleY,i=this.image.convertToNodeSpaceAR(t.worldLocation),a=this.image.convertToNodeSpaceAR(t.previosWorldLocation);n-=i.x-a.x,r-=i.y-a.y,this.image.anchorX=n/(this.image.width*this.image.scaleX),this.image.anchorY=r/(this.image.height*this.image.scaleY),this.checkReset()}},e.prototype.panEnd=function(){this.log.info("end")},e.prototype.reset=function(){var t=this;this.resetButton.interactable=!1,cc.tween(this.image).to(.2,{scaleX:s.GlobalController.initialScale.x,scaleY:s.GlobalController.initialScale.y,anchorX:s.GlobalController.initialAnchorPoint.x,anchorY:s.GlobalController.initialAnchorPoint.y,angle:s.GlobalController.initialAngle}).call(function(){t.checkReset()}).start()},e.prototype.checkReset=function(){var t=this.image,e=t.scaleX,o=t.scaleY,n=t.anchorX,r=t.anchorY,i=t.angle,a=this.resetButton.target.getComponent(cc.Sprite),c=this.resetButton.target.getChildByName("Icon").getComponent(cc.Sprite);1===e&&1===o&&.5===n&&.5===r&&i%360==0?(this.resetButton.interactable=!1,a.spriteFrame=this.grayBgFrame,c.spriteFrame=this.resetDisable):(this.resetButton.interactable=!0,a.spriteFrame=this.normalBgFrame,c.spriteFrame=this.resetEnable)},e.prototype.onDestroy=function(){this.log.info("destroy")},e.prototype.update=function(){this.image.setPosition(0,0)},i([p(cc.Node)],e.prototype,"gesturesLayer",void 0),i([p(cc.Node)],e.prototype,"UI",void 0),i([p(cc.Node)],e.prototype,"image",void 0),i([p(cc.Node)],e.prototype,"workSpace",void 0),i([p(cc.Button)],e.prototype,"zoomInButton",void 0),i([p(cc.Button)],e.prototype,"zoomOutButton",void 0),i([p(cc.Button)],e.prototype,"controlButton",void 0),i([p(cc.Button)],e.prototype,"transformButton",void 0),i([p(cc.Button)],e.prototype,"rotateButton",void 0),i([p(cc.Node)],e.prototype,"helpButton",void 0),i([p(cc.Button)],e.prototype,"resetButton",void 0),i([p(cc.Button)],e.prototype,"cutButton",void 0),i([p(cc.Node)],e.prototype,"backButton",void 0),i([p(cc.Node)],e.prototype,"processButton",void 0),i([p(cc.Node)],e.prototype,"helpNode",void 0),i([p(cc.Node)],e.prototype,"helpMouse",void 0),i([p(cc.Node)],e.prototype,"helpTouch",void 0),i([p(cc.SpriteFrame)],e.prototype,"normalBgFrame",void 0),i([p(cc.SpriteFrame)],e.prototype,"grayBgFrame",void 0),i([p(cc.SpriteFrame)],e.prototype,"translateEnable",void 0),i([p(cc.SpriteFrame)],e.prototype,"translateDisable",void 0),i([p(cc.SpriteFrame)],e.prototype,"scaleEnable",void 0),i([p(cc.SpriteFrame)],e.prototype,"scaleDisable",void 0),i([p(cc.SpriteFrame)],e.prototype,"rotateEnable",void 0),i([p(cc.SpriteFrame)],e.prototype,"rotateDisable",void 0),i([p(cc.SpriteFrame)],e.prototype,"zoomInEnable",void 0),i([p(cc.SpriteFrame)],e.prototype,"zoomInDisable",void 0),i([p(cc.SpriteFrame)],e.prototype,"zoomOutEnable",void 0),i([p(cc.SpriteFrame)],e.prototype,"zoomOutDisable",void 0),i([p(cc.SpriteFrame)],e.prototype,"resetEnable",void 0),i([p(cc.SpriteFrame)],e.prototype,"resetDisable",void 0),i([p(cc.SpriteFrame)],e.prototype,"cutEnable",void 0),i([p(cc.SpriteFrame)],e.prototype,"cutDisable",void 0),i([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../Gestures/pan/Pan.js":"Pan","../globalController":"globalController","js-logger":3}],SaveScene:[function(t,e,o){"use strict";cc._RF.push(e,"6f466FJvxRKn71WXzkstVdc","SaveScene");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var c=a(t("js-logger")),s=a(t("file-saver")),l=t("../getCanvas"),u=t("../globalController"),h=window.File;try{new h([],"")}catch(v){h=function(t){function e(e,o,n){void 0===n&&(n={});var r=t.call(this,e,n)||this;return r.lastModifiedDate=new Date,r.lastModified=+r.lastModifiedDate,r.name=o,r}return r(e,t),e}(Blob)}var p=cc._decorator,f=p.ccclass,d=p.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.backButton=null,e.backAllButton=null,e.saveButton=null,e.shareButton=null,e.backBackgroud=null,e.frontBackground=null,e.mask=null,e.image=null,e.captureCamera=null,e.fileName="capture.jpg",e.imageFormat="image/jpeg",e.shareTitle="Funny Images",e.shareText="Hey! Look on my funny photo!",e.log=c.default.get("Download Scene"),e}return r(e,t),e.prototype.onLoad=function(){this.log.info("load"),navigator.share&&navigator.canShare&&(this.shareButton.active=!0);var t=this.image.getComponent(cc.Sprite),e=new cc.SpriteFrame(u.GlobalController.texture);t.spriteFrame=e,this.image.setContentSize(e.getOriginalSize()),this.image.setScale(u.GlobalController.currentScale),this.image.setAnchorPoint(u.GlobalController.currentAnchorPoint),this.image.angle=u.GlobalController.currentAngle},e.prototype.onEnable=function(){this.log.info("enable")},e.prototype.start=function(){this.log.info("start"),this.image.setPosition(0,0)},e.prototype.clickBack=function(){this.backButton.getComponent(cc.Button).interactable=!1,cc.director.loadScene("Process Scene")},e.prototype.clickBackAll=function(){this.backAllButton.getComponent(cc.Button).interactable=!1,cc.director.loadScene("Upload Scene")},e.prototype.clickSave=function(){var t=this;this.saveButton.getComponent(cc.Button).interactable=!1,this.shareButton.getComponent(cc.Button).interactable=!1;var e=this.captureCamera.getComponent(cc.Camera),o=new cc.RenderTexture;o.initWithSize(cc.visibleRect.width,cc.visibleRect.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8),this.log.info(o.getHtmlElementObj());var n=o.width,r=o.height,i=l.getCanvas(n,r,!0),a=i.canvas,c=i.tempCanvas,u=c.getContext("2d");e.targetTexture=o,e.render();var h=new ImageData(new Uint8ClampedArray(o.readPixels().buffer),n,r);u.putImageData(h,0,0);var p=a.getContext("2d");p.scale(1,-1),p.drawImage(c,0,-a.height),p.setTransform(1,0,0,1,0,0),a.toBlob(function(n){s.default(n,t.fileName),t.saveButton.getComponent(cc.Button).interactable=!0,t.shareButton.getComponent(cc.Button).interactable=!0,e.targetTexture=null,o.destroy()},this.imageFormat,.95)},e.prototype.clickShare=function(){var t=this;this.saveButton.getComponent(cc.Button).interactable=!1,this.shareButton.getComponent(cc.Button).interactable=!1;var e=this.captureCamera.getComponent(cc.Camera),o=new cc.RenderTexture;o.initWithSize(cc.visibleRect.width,cc.visibleRect.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8),this.log.info(o.getHtmlElementObj());var n=o.width,r=o.height,i=l.getCanvas(n,r,!0),a=i.canvas,c=i.tempCanvas,s=c.getContext("2d");e.targetTexture=o,e.render();var u=new ImageData(new Uint8ClampedArray(o.readPixels().buffer),n,r);s.putImageData(u,0,0);var p=a.getContext("2d");p.scale(1,-1),p.drawImage(c,0,-a.height),p.setTransform(1,0,0,1,0,0),a.toBlob(function(n){var r=[];r.push(new h([n],t.fileName,{type:t.imageFormat})),navigator.canShare({files:r})?navigator.share({files:r,title:t.shareTitle,text:t.shareText}).then(function(){t.log.info("Share was successful."),t.saveButton.getComponent(cc.Button).interactable=!0,t.shareButton.getComponent(cc.Button).interactable=!0,e.targetTexture=null,o.destroy()}).catch(function(n){t.log.error("Sharing failed",n),t.saveButton.getComponent(cc.Button).interactable=!0,t.shareButton.getComponent(cc.Button).interactable=!0,e.targetTexture=null,o.destroy()}):(t.log.info("this file type share not supported."),t.saveButton.getComponent(cc.Button).interactable=!0,t.shareButton.getComponent(cc.Button).interactable=!0,e.targetTexture=null,o.destroy())},this.imageFormat,.95)},e.prototype.onDisable=function(){this.log.info("disable")},e.prototype.onDestroy=function(){this.log.info("destroy")},e.prototype.update=function(){this.image.setPosition(0,0)},i([d(cc.Node)],e.prototype,"backButton",void 0),i([d(cc.Node)],e.prototype,"backAllButton",void 0),i([d(cc.Node)],e.prototype,"saveButton",void 0),i([d(cc.Node)],e.prototype,"shareButton",void 0),i([d(cc.Node)],e.prototype,"backBackgroud",void 0),i([d(cc.Node)],e.prototype,"frontBackground",void 0),i([d(cc.Node)],e.prototype,"mask",void 0),i([d(cc.Node)],e.prototype,"image",void 0),i([d(cc.Camera)],e.prototype,"captureCamera",void 0),i([d(cc.String)],e.prototype,"fileName",void 0),i([d(cc.String)],e.prototype,"imageFormat",void 0),i([d(cc.String)],e.prototype,"shareTitle",void 0),i([d(cc.String)],e.prototype,"shareText",void 0),i([f],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../getCanvas":"getCanvas","../globalController":"globalController","file-saver":2,"js-logger":3}],UploadScene:[function(t,e,o){"use strict";cc._RF.push(e,"723baHw6R9Hk5tOhzNBLmNW","UploadScene");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var c=a(t("js-logger")),s=t("../globalController");c.default.useDefaults();var l=cc._decorator,u=l.ccclass,h=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.button=null,e.log=c.default.get("Upload Scene"),e}return r(e,t),e.prototype.onLoad=function(){this.log.info("load")},e.prototype.onEnable=function(){this.log.info("enable")},e.prototype.onDisable=function(){this.log.info("disable")},e.prototype.start=function(){this.log.info("start"),null!==s.GlobalController.texture&&(s.GlobalController.texture.destroy(),s.GlobalController.texture=null),s.GlobalController.reset()},e.prototype.uploadHeader=function(){this.log.info("Upload button click");var t=document.createElement("input"),e=document.body;t.type="file",t.accept="image/*",t.multiple=!1,t.style.position="fixed",t.style.top="-100em",t.onchange=this.handleChange.bind(this),e.appendChild(t),t.click(),e.removeChild(t)},e.prototype.handleChange=function(t){var e=this;this.log.info("handleChange"),this.button.getComponent(cc.Button).interactable=!1;var o=t.target.files[0],n=window.URL.createObjectURL(o);cc.assetManager.loadRemote(n,{ext:"."+o.type.split("/")[1]},function(t,o){window.URL.revokeObjectURL(n),t?(e.log.error(t),e.button.getComponent(cc.Button).interactable=!0):(s.GlobalController.texture=o,cc.director.loadScene("Process Scene"))})},e.prototype.onDestroy=function(){this.log.info("destoy")},i([h(cc.Node)],e.prototype,"button",void 0),i([u],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../globalController":"globalController","js-logger":3}],getCanvas:[function(t,e,o){"use strict";cc._RF.push(e,"585126TJEBI3IMbRWZKS6Ay","getCanvas");var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0}),o.getCanvas=void 0;var r=n(t("js-logger"));r.default.useDefaults();var i=r.default.get("canvas"),a=void 0,c=void 0;o.getCanvas=function(t,e,o){return a||(i.info("create canvas"),a=document.createElement("canvas")),c||(i.info("create temp canvas"),c=document.createElement("canvas")),t&&(a.width=t,c.width=t),e&&(a.height=e,c.height=e),o&&(a.getContext("2d").clearRect(0,0,a.width,a.height),a.getContext("2d").clearRect(0,0,a.width,a.height)),{canvas:a,tempCanvas:c}},cc._RF.pop()},{"js-logger":3}],globalController:[function(t,e,o){"use strict";cc._RF.push(e,"64364hav3BIMqK49B310yxE","globalController"),Object.defineProperty(o,"__esModule",{value:!0}),o.GlobalController=void 0;var n=function(){function t(){}return t.reset=function(){t.currentAnchorPoint.set(t.initialAnchorPoint),t.currentAngle=t.initialAngle,t.currentScale.set(t.initialScale)},t.FACE_OFFSET=cc.v2(-150,-50),t.initialAnchorPoint=cc.v2(.5,.5),t.initialScale=cc.v2(1,1),t.initialAngle=0,t.currentAnchorPoint=cc.v2(.5,.5),t.currentScale=cc.v2(1,1),t.currentAngle=0,t.texture=null,t}();o.GlobalController=n,cc._RF.pop()},{}],stopPropagation:[function(t,e,o){"use strict";cc._RF.push(e,"8142d9dU7BFmYgOQ/9Gojll","stopPropagation");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator.ccclass,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.stopPropagation,this),this.node.on(cc.Node.EventType.MOUSE_DOWN,this.stopPropagation,this)},e.prototype.stopPropagation=function(t){t.stopPropagation()},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.stopPropagation,this),this.node.off(cc.Node.EventType.MOUSE_DOWN,this.stopPropagation,this)},i([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"48ff7BH6WxN462LNG6pVjv1","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["OnePointerTracer1","OnePointerTracer","Pan","FSM","GetValue","ProcessScene","SaveScene","UploadScene","stopPropagation","getCanvas","globalController","use_v2.1-2.2.1_cc.Toggle_event"]);