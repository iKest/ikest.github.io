!function(){"use strict";const t=5e3,i=5e3,e=5,s=200*Math.PI,h=200,a=200,n=40,o=0,l=500;var r,c=(function(t){var i=Object.prototype.hasOwnProperty,e="~";function s(){}function h(t,i,e){this.fn=t,this.context=i,this.once=e||!1}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(e=!1)),a.prototype.eventNames=function(){var t,s,h=[];if(0===this._eventsCount)return h;for(s in t=this._events)i.call(t,s)&&h.push(e?s.slice(1):s);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(t)):h},a.prototype.listeners=function(t,i){var s=e?e+t:t,h=this._events[s];if(i)return!!h;if(!h)return[];if(h.fn)return[h.fn];for(var a=0,n=h.length,o=new Array(n);a<n;a++)o[a]=h[a].fn;return o},a.prototype.emit=function(t,i,s,h,a,n){var o=e?e+t:t;if(!this._events[o])return!1;var l,r,c=this._events[o],p=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),p){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,i),!0;case 3:return c.fn.call(c.context,i,s),!0;case 4:return c.fn.call(c.context,i,s,h),!0;case 5:return c.fn.call(c.context,i,s,h,a),!0;case 6:return c.fn.call(c.context,i,s,h,a,n),!0}for(r=1,l=new Array(p-1);r<p;r++)l[r-1]=arguments[r];c.fn.apply(c.context,l)}else{var d,g=c.length;for(r=0;r<g;r++)switch(c[r].once&&this.removeListener(t,c[r].fn,void 0,!0),p){case 1:c[r].fn.call(c[r].context);break;case 2:c[r].fn.call(c[r].context,i);break;case 3:c[r].fn.call(c[r].context,i,s);break;case 4:c[r].fn.call(c[r].context,i,s,h);break;default:if(!l)for(d=1,l=new Array(p-1);d<p;d++)l[d-1]=arguments[d];c[r].fn.apply(c[r].context,l)}}return!0},a.prototype.on=function(t,i,s){var a=new h(i,s||this),n=e?e+t:t;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],a]:this._events[n].push(a):(this._events[n]=a,this._eventsCount++),this},a.prototype.once=function(t,i,s){var a=new h(i,s||this,!0),n=e?e+t:t;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],a]:this._events[n].push(a):(this._events[n]=a,this._eventsCount++),this},a.prototype.removeListener=function(t,i,h,a){var n=e?e+t:t;if(!this._events[n])return this;if(!i)return 0==--this._eventsCount?this._events=new s:delete this._events[n],this;var o=this._events[n];if(o.fn)o.fn!==i||a&&!o.once||h&&o.context!==h||(0==--this._eventsCount?this._events=new s:delete this._events[n]);else{for(var l=0,r=[],c=o.length;l<c;l++)(o[l].fn!==i||a&&!o[l].once||h&&o[l].context!==h)&&r.push(o[l]);r.length?this._events[n]=1===r.length?r[0]:r:0==--this._eventsCount?this._events=new s:delete this._events[n]}return this},a.prototype.removeAllListeners=function(t){var i;return t?(i=e?e+t:t,this._events[i]&&(0==--this._eventsCount?this._events=new s:delete this._events[i])):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=e,a.EventEmitter=a,t.exports=a}(r={exports:{}},r.exports),r.exports),p=function(t,i,e,s,h,a,n){var o=[h-t,a-i],l=[e-t,s-i],r=d(l,l),c=d(o,l)/r,p=[l[0]*(c=(c=c<0?0:c)>1?1:c)+t-h,l[1]*c+i-a];return d(p,p)<=n*n};function d(t,i){return t[0]*i[0]+t[1]*i[1]}function g(t,i,e,s){return Math.sqrt(Math.pow(t-e,2)+Math.pow(i-s,2))}var u=function(t,i,e,s,h,a,n){return n=n||1,Math.abs(g(t,i,e,s)-(g(t,i,h,a)+g(e,s,h,a)))<=n},m=function(t,i,e,s){var h,a,n=t.length,o=!1;for(h=0,a=n-2;h<n;h+=2)t[h+1]>e!=t[a+1]>e&&i<(t[a]-t[h])*(e-t[h+1])/(t[a+1]-t[h+1])+t[h]&&(o=!o),a=h;if(o)return!0;for(h=0;h<n;h+=2){var l,r,c=t[h],p=t[h+1];if(h===n-2?(l=t[0],r=t[1]):(l=t[h+2],r=t[h+3]),u(c,p,l,r,i,e,s))return!0}return!1},v=function(t,i,e,s){if(m(t,i,e))return!0;for(var h=t.length,a=0;a<h-2;a+=2)if(p(t[a],t[a+1],t[a+2],t[a+3],i,e,s))return!0;return p(t[0],t[1],t[h-2],t[h-1],i,e,s)};var M=function(t,i){for(var e,s,h,a,n,o,l=t,r=i,c=[l,r],p=0;p<c.length;p++)for(var d=c[p],g=0;g<d.length;g+=2){var u=(g+2)%d.length,m={x:d[u+1]-d[g+1],y:d[g]-d[u]};for(e=s=null,o=0;o<l.length;o+=2)h=m.x*l[o]+m.y*l[o+1],(null===e||h<e)&&(e=h),(null===s||h>s)&&(s=h);for(a=n=null,o=0;o<r.length;o+=2)h=m.x*r[o]+m.y*r[o+1],(null===a||h<a)&&(a=h),(null===n||h>n)&&(n=h);if(s<a||n<e)return!1}return!0},x=M,f=v;const y=(t,i)=>{let e=t+Math.random()*(i+1-t);return e=Math.floor(e)},w=(t,i)=>{let e=Math.atan(Math.abs(t/i));return t>0&&i<0?e=Math.PI-e:t<0&&i<0?e=Math.PI+e:t<0&&i>0&&(e=2*Math.PI-e),e},S=(t,i,e,s,h)=>{return{x:Math.round(Math.cos(h)*(e-t)-Math.sin(h)*(s-i)+t),y:Math.round(Math.sin(h)*(e-t)+Math.cos(h)*(s-i)+i)}},Y=(t,i,e,s)=>{const h=s-i,a=e-t;let n=Math.atan2(h,a);return(n*=180/Math.PI)<0&&(n=-1*n+180),n},X=(t,i)=>{let e=Math.atan2(i,t);return(e*=180/Math.PI)<0&&(e=-1*e+180),e},b=(t,i)=>{let e=Math.abs(i*Math.sin(t)),s=Math.abs(i*Math.cos(t));return t<Math.PI/2?s*=-1:t<Math.PI?(e*=1,s*=1):t<3*Math.PI/2?e*=-1:(e*=-1,s*=-1),{vx:e,vy:s}};class I{constructor(t,i){if(this.gameMap=t,this.x=+(i.x||0),this.y=+(i.y||0),this.width=i.size||i.width||0,this.height=i.size||i.height||0,this.id=i.id||"",!this.width||!this.height)throw new Error("element size can not be undefined")}prepare(){this.paintX=this.gameMap.view.relativeX(this.x),this.paintY=this.gameMap.view.relativeY(this.y),this.paintWidth=this.gameMap.view.relativeW(this.width),this.paintHeight=this.gameMap.view.relativeH(this.height);const t=this.paintWidth/2,i=this.paintHeight/2;this.visible=this.paintX+t>0&&this.paintX-t<this.gameMap.view.width&&this.paintY+i>0&&this.paintY-i<this.gameMap.view.height}}class _ extends I{constructor(t,i){super(t,i),this.lightDirection=!0,this.point=i.point,this.lightSize=this.width/2}update(){this.prepare(),this.action(),this.render()}action(){if(!this.visible)return;this.lightSize+=this.lightDirection?1:-1,(this.lightSize>this.width||this.lightSize<this.width/2)&&(this.lightDirection=!this.lightDirection)}render(){this.visible&&(this.gameMap.ctx.fillStyle="#fff",this.gameMap.ctx.globalAlpha=.2,this.gameMap.ctx.beginPath(),this.gameMap.ctx.arc(this.paintX,this.paintY,this.lightSize*this.paintWidth/this.width,0,2*Math.PI),this.gameMap.ctx.fill(),this.gameMap.ctx.globalAlpha=1,this.gameMap.ctx.beginPath(),this.gameMap.ctx.arc(this.paintX,this.paintY,this.paintWidth/2,0,2*Math.PI),this.gameMap.ctx.fill())}}class P{constructor(t,i,e,s){this.x=t,this.y=i,this.speed=e,this.angle=s}}class W extends I{constructor(t,i){super(t,i),this.point=0,this.isSpeedUp=!1,this.fillColor="",this.stopped=!1,this.foodsEated=new Map,this.head=[],this.visionAngle=170,this.closestSnakeDistance=5e3,this.closestFoodDistance=5e3,this.closestSnake={},this.closestFood={},this.seeFood=!1,this.seeSnake=!1,this.collidedV=!1,this.collidedH=!1,this.movementQueue=[],this.cX=[],this.cY=[],this.lX=[],this.lY=[],this.rX=[],this.rY=[],this.speed=e,this.oldSpeed=e,this.turnSpeed=.2,this.vx=0,this.vy=0,this.fillColor=i.fillColor||"#fff",this.toAngle=(i.angle||0)+s,this.angle=(i.angle||0)+s,this.length=i.length||0,this.updateSize(),this.velocity(),this.calcHead()}zeroFood(){this.closestFoodDistance=5e4,this.seeFood=!1}zeroSnake(){this.closestSnakeDistance=5e4,this.seeFood=!1}setFood(t,i,e){this.seeFood=!0,this.closestFoodDistance=t,this.closestFood.x=i,this.closestFood.y=e}setSnake(t,i,e){this.seeSnake=!0,this.closestSnakeDistance=t,this.closestSnake.x=i,this.closestSnake.y=e}updateSize(t=0){this.width+=t,this.height+=t,this.length+=50*t,this.movementQueueLen=Math.ceil(this.length/this.oldSpeed)}moveTo(t,i,e=!1){if(e&&(this.collidedV||this.collidedH))return;const s=t-this.x,h=this.y-i,a=w(s,h),n=Math.abs(this.toAngle%(2*Math.PI));let o=Math.floor(this.toAngle/(2*Math.PI));this.toAngle=a,n>=3*Math.PI/2&&this.toAngle<=Math.PI/2?o+=1:n<=Math.PI/2&&this.toAngle>=3*Math.PI/2&&(o-=1),this.toAngle+=o*Math.PI*2}velocity(){const t=this.angle%(2*Math.PI),i=Math.abs(this.speed*Math.sin(t)),e=Math.abs(this.speed*Math.cos(t));t<Math.PI/2?(this.vx=i,this.vy=-e):t<Math.PI?(this.vx=i,this.vy=e):t<3*Math.PI/2?(this.vx=-i,this.vy=e):(this.vx=-i,this.vy=-e)}turnAround(){const t=this.toAngle-this.angle;if(Math.abs(t)<=this.turnSpeed*this.gameMap.scale){const{toAngle:t}=this;this.toAngle=s+t%(2*Math.PI),this.angle=s+t%(2*Math.PI)}else this.angle+=Math.sign(t)*this.turnSpeed*this.gameMap.scale}speedUp(){this.isSpeedUp||(this.isSpeedUp=!0,this.oldSpeed=this.speed,this.speed*=2)}speedDown(){this.isSpeedUp&&(this.isSpeedUp=!1,this.speed=this.oldSpeed)}eat(t,i){this.point+=i.point;const e=i.point/200;this.foodsEated.set(t,i),this.updateSize(e)}action(){this.cX.length=0,this.cY.length=0,this.lX.length=0,this.lY.length=0,this.rX.length=0,this.rY.length=0,this.stopped||(this.movementQueue.push(new P(this.x,this.y,this.speed,this.angle)),this.movementQueue.length>this.movementQueueLen&&this.movementQueue.shift(),this.turnAround(),this.velocity(),this.x+=this.vx,this.y+=this.vy,this.calcHead(),this.x>2*this.width&&this.x<this.gameMap.width-2*this.width&&(this.collidedH=!1),this.y>2*this.height&&this.y<this.gameMap.height-2*this.height&&(this.collidedV=!1),this.gameMap.bounds.forEach((t,i)=>{if(x(this.head,t)){const t=b(this.angle%(2*Math.PI),this.speed);switch(i){case"UP":this.collideV||(this.moveTo(this.x+t.vx,this.y-t.vy),this.collidedV=!0);break;case"LEFT":case"RIGHT":this.collideH||(this.moveTo(this.x-t.vx,this.y+t.vy),this.collidedH=!0);break;default:this.collideV||(this.moveTo(this.x+t.vx,this.y-t.vy),this.collidedV=!0)}}}))}render(){this.gameMap.ctx.save(),this.gameMap.ctx.beginPath(),this.gameMap.ctx.moveTo(this.paintX,this.paintY);let t=this.length;if(this.movementQueue.length){let i=this.movementQueue.length-1;for(;i;){const e=this.movementQueue[i];let{x:s}=e,{y:h}=e,{angle:a}=e;if(t>0&&t<e.speed){const n=this.movementQueue[i+1]||this,o=t/e.speed;s=n.x-(n.x-s)*o,h=n.y-(n.y-h)*o,a=n.angle-(n.angle-a)*o}else if(t<0)break;i-=1,t-=e.speed,this.gameMap.ctx.lineTo(this.gameMap.view.relativeX(s),this.gameMap.view.relativeY(h));const n=S(s,h,s+.5*this.width,h,a),o=S(s,h,s-.5*this.width,h,a);this.cX.push(s),this.cY.push(h),this.lX.push(o.x),this.lY.push(o.y),this.rX.push(n.x),this.rY.push(n.y)}}this.gameMap.ctx.lineCap="butt",this.gameMap.ctx.lineJoin="round",this.gameMap.ctx.strokeStyle=this.fillColor,this.gameMap.ctx.lineWidth=this.paintWidth,this.gameMap.ctx.shadowOffsetY=Math.round(4)/this.gameMap.scale,this.gameMap.ctx.shadowBlur=Math.round(7),this.gameMap.ctx.shadowColor="gray",this.gameMap.ctx.stroke(),this.gameMap.ctx.restore();let i=S(this.paintX,this.paintY,this.paintX-.5*this.paintWidth,this.paintY-this.paintHeight,this.angle),e=S(this.paintX,this.paintY,this.paintX+.5*this.paintWidth,this.paintY-this.paintHeight,this.angle),s=S(this.paintX,this.paintY,this.paintX+.5*this.paintWidth,this.paintY,this.angle),h=S(this.paintX,this.paintY,this.paintX-.5*this.paintWidth,this.paintY,this.angle);this.gameMap.ctx.save(),this.gameMap.ctx.beginPath(),this.gameMap.ctx.moveTo(i.x,i.y),this.gameMap.ctx.lineTo(e.x,e.y),this.gameMap.ctx.lineTo(s.x,s.y),this.gameMap.ctx.lineTo(h.x,h.y),this.gameMap.ctx.closePath(),this.gameMap.ctx.fillStyle="blue",this.gameMap.ctx.shadowOffsetY=4/this.gameMap.scale,this.gameMap.ctx.shadowColor="red",this.gameMap.ctx.fill(),this.gameMap.ctx.restore(),i=S(this.paintX,this.paintY,this.paintX-.3*this.paintWidth,this.paintY-.8*this.paintHeight,this.angle),e=S(this.paintX,this.paintY,this.paintX+.3*this.paintWidth,this.paintY-.8*this.paintHeight,this.angle),s=S(this.paintX,this.paintY,this.paintX+.3*this.paintWidth,this.paintY-.2*this.paintHeight,this.angle),h=S(this.paintX,this.paintY,this.paintX-.3*this.paintWidth,this.paintY-.2*this.paintHeight,this.angle),this.gameMap.ctx.save(),this.gameMap.ctx.beginPath(),this.gameMap.ctx.moveTo(i.x,i.y),this.gameMap.ctx.lineTo(e.x,e.y),this.gameMap.ctx.lineTo(s.x,s.y),this.gameMap.ctx.lineTo(h.x,h.y),this.gameMap.ctx.closePath(),this.gameMap.ctx.fillStyle="white",this.gameMap.ctx.fill(),this.gameMap.ctx.restore()}update(){this.prepare(),this.action(),this.render()}calcHead(){const t=S(this.x,this.y,this.x-.5*this.width,this.y-this.height,this.angle),i=S(this.x,this.y,this.x+.5*this.width,this.y-this.height,this.angle),e=S(this.x,this.y,this.x+.5*this.width,this.y,this.angle),s=S(this.x,this.y,this.x-.5*this.width,this.y,this.angle);this.head[0]=t.x,this.head[1]=t.y,this.head[2]=i.x,this.head[3]=i.y,this.head[4]=e.x,this.head[5]=e.y,this.head[6]=s.x,this.head[7]=s.y,this.cX.push(.5*(t.x+i.x)),this.cY.push(.5*(t.y+i.y)),this.lX.push(t.x),this.lY.push(t.y),this.rX.push(i.x),this.rY.push(i.y),this.cX.push(this.x),this.cY.push(this.y),this.lX.push(s.x),this.lY.push(s.y),this.rX.push(e.x),this.rY.push(e.y)}}const F=(t,i,e=1)=>{const s=document.createElement("canvas");s.width=t*e,s.height=i*e;const n=s.getContext("2d"),o=["#eee","#aaa"],l=h/e,r=a/e;for(let s=0,h=0;s<=t;s+=l,h+=1)for(let a=0,c=0;a<=i;a+=r,c+=1){const p=t*e-s,d=i*e-a,g=p<l?p:l,u=d<r?d:r;n.fillStyle=o[(h+c)%o.length],n.fillRect(s,a,g,u)}return n.lineWidth=3,n.strokeRect(0,0,t*e,i*e),s};class H{constructor(t,i,e){this.gameMap=t,this.margin=i,this.radius=e,this.image=document.createElement("canvas"),this.initImage()}initImage(){this.image.width=2*this.radius,this.image.height=2*this.radius,this.x=this.gameMap.view.width-2*this.radius-this.margin,this.y=this.gameMap.view.height-2*this.radius-this.margin,this.mapX=this.x+this.radius/2,this.mapY=this.y+this.radius/2;const t=this.image.getContext("2d");this.smallMapWidth=this.gameMap.width>this.gameMap.height?this.radius:this.gameMap.width*this.radius/this.gameMap.height,this.smallMapHeight=this.gameMap.width>this.gameMap.height?this.gameMap.height*this.radius/this.gameMap.width:this.radius;const i=this.radius-this.smallMapWidth/2,e=this.radius-this.smallMapHeight/2;t.save(),t.beginPath(),t.arc(this.radius,this.radius,this.radius-1,0,2*Math.PI),t.fillStyle="#000",t.fill(),t.lineWidth=2,t.strokeStyle="#fff",t.stroke(),t.fillStyle="#ccc",t.fillRect(i,e,this.smallMapWidth,this.smallMapHeight),t.restore()}render(){const t=this.smallMapWidth/this.gameMap.paintWidth,i=this.smallMapWidth/this.gameMap.width,{ctx:e}=this.gameMap,s=this.gameMap.view.x*t+this.mapX,h=this.gameMap.view.y*t+this.mapY,a=this.gameMap.view.width*t,n=this.gameMap.view.height*t;e.save(),e.globalAlpha=.8,e.drawImage(this.image,this.x,this.y),e.strokeStyle="#fff",e.strokeRect(s,h,a,n),this.gameMap.units.forEach(t=>{const s=t.x*i+this.mapX,h=t.y*i+this.mapY;e.fillStyle="#f00",e.fillRect(s-2,h-2,4,4)}),e.restore()}}class k{constructor(t,i,e,s=0,h=0){this.width=i,this.height=e,this.x=s,this.y=h,this.gameMap=t}trace(t){this.x=t.x/this.gameMap.scale-this.width/2,this.y=t.y/this.gameMap.scale-this.height/2}absoluteX(t){return(t+this.x)*this.gameMap.scale}absoluteY(t){return(t+this.y)*this.gameMap.scale}relativeX(t){return t/this.gameMap.scale-this.x}relativeY(t){return t/this.gameMap.scale-this.y}relativeW(t){return t/this.gameMap.scale}relativeH(t){return t/this.gameMap.scale}}const A=window.requestAnimationFrame||window.webkitRequestAnimationFrame,E=new class extends c{constructor(e="player",s=document.createElement("canvas"),n=t,o=i,l=1){super(),this.canvas=s,this.width=t,this.height=i,this.bounds=new Map([["UP",[-50,0,t+50,0,t+50,-50,-50,-50]],["LEFT",[0,0,0,i,-50,i,-50,0]],["RIGHT",[t,0,t+50,0,t+50,i,t,i]],["DOWN",[-50,i,-50,i+50,t+50,i+50,t+50,i]]]),this.vWidth=n,this.vHeight=o,this.scale=l,this.canvas.width=n,this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.paintSizeReset(),this.tileImage=F(8*h,8*a),this.view=new k(this,n,o),this.smallMap=new H(this,30,50),this.units=new Map,this.foods=new Map,this.playerID=e}initUnits(e){this.units.set(this.playerID,new W(this,{x:y(50,t-50),y:y(50,i-50),size:n,length:o,angle:2*Math.random()*Math.PI,fillColor:"#00FF00",id:this.playerID}));for(let s=e;s;s-=1)this.units.set(`unit${s}`,new W(this,{x:y(50,t-50),y:y(50,i-50),size:n,length:o,angle:2*Math.random()*Math.PI,fillColor:"#00FF00",id:`unit${s}`}))}initFoods(e){for(let s=e;s;s-=1){const e=Math.floor(30*Math.random()+50),h=Math.floor(e/3);this.foods.set(`food${s}`,new _(this,{size:h,point:e,x:y(h,t-h),y:y(h,i-h),id:`food${s}`}))}}setScale(t){this.scale!==t&&(this.scale=t<1?1:t,this.paintSizeReset(),this.emit("scale_changed"))}setToScale(t){this.toScale=t}relative(t){return t/this.scale}clear(){this.ctx.clearRect(0,0,this.view.width,this.view.height)}update(){this.checkCollisions();const t=[],i=this.units.get(this.playerID);this.toScale&&this.scale!==this.toScale&&this.setScale(this.toScale),this.ctx.clearRect(0,0,this.view.width,this.view.height),this.view.trace(i),this.render(),this.units.forEach((t,i)=>{i!==this.playerID&&t.seeFood&&(t.moveTo(t.closestFood.x,t.closestFood.y),t.zeroFood()),t.update()}),this.foods.forEach((i,e)=>{i.update(),this.units.forEach(s=>{if(!t.some(t=>t===e))if(f(s.head,i.x,i.y,.5*i.width))t.push(e),s.eat(e,i);else{const t=Math.round(i.x-s.x),e=Math.round(i.y-s.y),h=Math.abs(t)+Math.abs(e),a=Y(s.x,s.y,i.x,i.y),n=X(s.vx,s.vy);a<=n+s.visionAngle/2&&a>=n-s.visionAngle/2&&h<s.closestFoodDistance&&s.setFood(h,i.x,i.y)}})}),t.forEach(t=>this.foods.delete(t)),this.smallMap.render()}render(){const{view:t}=this,i=this.relative(this.tileImage.width),e=this.relative(this.tileImage.height),s=t.x<0?-t.x:-t.x%i,h=t.y<0?-t.y:-t.y%e,a=t.x+t.width>this.paintWidth?this.paintWidth-t.x:s+t.width+i,n=t.y+t.height>this.paintHeight?this.paintHeight-t.y:h+t.height+e;for(let t=s;t<=a;t+=i)for(let s=h;s<=n;s+=e){const h=a-t,o=n-s,l=h<i?h:i,r=o<e?o:e;this.ctx.drawImage(this.tileImage,0,0,l*this.scale,r*this.scale,t,s,l,r)}}paintSizeReset(){this.paintWidth=this.relative(this.width),this.paintHeight=this.relative(this.height)}checkCollisions(){this.units.forEach(t=>{this.units.forEach(i=>{if(t.id!==i.id)for(let e=i.cX.length-1;e&&!x(t.head,[i.lX[e],i.lY[e],i.rX[e],i.rY[e],i.rX[e-1],i.rY[e-1],i.lX[e-1],i.lY[e-1]]);e-=1);})})}}("player",document.getElementById("cas"),window.innerWidth,window.innerHeight);let C=!1;const T={},D=0;let z,L=+new Date;function R(){const t=+new Date;t-L>D&&(L=t,C&&E.scale<2?E.setToScale(E.scale+.1):E.scale>1&&!C&&E.setToScale(E.scale-.1),E.update()),A(R)}E.initUnits(5),z=E.units.get("player"),E.initFoods(l),function(){function t(t){if(t.preventDefault(),t.touches)T.x=t.touches[0].pageX,T.y=t.touches[0].pageY;else{const i=t||window.event;T.x=i.clientX,T.y=i.clientY}const i=(T.x+E.view.x)*E.scale,e=(T.y+E.view.y)*E.scale;z.moveTo(i,e,!0)}navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)?(window.addEventListener("touchstart",t),window.addEventListener("touchmove",t)):(window.addEventListener("mousemove",t),window.addEventListener("mousedown",()=>{z.speedUp(),C=!0}),window.addEventListener("mouseup",()=>{z.speedDown(),C=!1}))}(),R()}();
//# sourceMappingURL=bundle.js.map
