(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(h,u,s){h.exports=s(17)},11:function(h,u,s){var f=s(12),i=s(13);i=i.__esModule?i.default:i,typeof i=="string"&&(i=[[h.i,i,""]]);var a={};a.insert="head",a.singleton=!1;var E=f(i,a);h.exports=i.locals||{}},13:function(h,u,s){},17:function(h,u,s){"use strict";s.r(u);var f=s(11),i=s(0),a=s.n(i),E=s(1),c=s.n(E),w=s(3),L=s.n(w),O=s(9),C=s(8),D=s(7);const b={type:a.a.AUTO,disableContextMenu:!0,render:{transparent:!0},scale:{parent:"gameContainer",mode:a.a.Scale.FIT,autoCenter:a.a.Scale.CENTER_BOTH,width:640,height:960,expandParent:!1},physics:{default:"arcade",arcade:{debug:!0,gravity:{x:0,y:0}}}};class v extends a.a.Scene{constructor(e){super(e);this.key=e.key,this.log=c.a.get(this.key),this.log.info("boot")}init(){this.log.info("init"),this.events.once("shutdown",this.shutdown,this),this.events.once("sleep",this.sleep,this),this.events.once("pause",this.pause,this),this.events.off("destroy",this.destroy,this)}shutdown(){this.log.info("shutdown"),this.events.off("sleep",this.sleep,this),this.events.off("pause",this.pause,this),this.events.once("destroy",this.destroy,this)}sleep(){this.log.info("sleep"),this.events.off("pause",this.pause,this),this.events.once("wake",this.wake,this)}pause(){this.log.info("pause"),this.events.once("resume",this.resume,this)}wake(){this.log.info("wake"),this.events.once("sleep",this.sleep,this),this.events.once("pause",this.pause,this)}resume(){this.log.info("resume"),this.events.once("pause",this.pause,this)}destroy(){this.log.info("destroy"),this.events.off("sleep",this.sleep,this),this.events.off("pause",this.pause,this),this.events.off("shutdown",this.shutdown,this),this.log=void 0}}class j extends v{constructor(){super({key:"BootScene"})}create(){this.log.info("create"),this.load.rexWebFont({google:{families:["Roboto"]}}),this.load.image("level_bg","assets/images/level_bg.jpg"),this.load.image("restart","assets/images/restart.png"),this.load.image("hammer","assets/images/hammer.png"),this.load.image("ring","assets/images/ring.png"),this.load.on("complete",()=>{document.querySelector(".loader").classList.toggle("loaded"),this.scene.start("LevelScene")}),this.load.start()}}var A=s(6),M=s.n(A);class N extends a.a.GameObjects.Zone{constructor(e,t,n,r,l,d){const S=l*8,R=d*8,P=S*.5,B=R*.5;super(e,n,r,l*8+128,d*8+128);this.log=c.a.get("ChainsMail");for(let p=0;p<d;p++)for(let g=0;g<l;g++){const x=n-P+(g%2===0?8:0)+g*8,T=r-B+p*8;new t.Circle(new t.V(x,T),8,!0,{img:this.scene.add.image(x,T,"ring").setScale(.5).setTint(7303032).setData("health",10)})}e.add.existing(this)}}const o=new M.a;class U extends v{constructor(){super({key:"LevelScene"});this.currentPointer=null,this.hammerTween=null}create(){this.log.info("create");const{centerX:e,centerY:t,width:n,height:r}=this.cameras.main;this.add.image(e,t,"level_bg"),this.restartBtn=this.rexButtonn.add(this.add.image(n-10,10,"restart").setScale(.4).setOrigin(1,0)).setEnable(!0).on("click",()=>{this.restartGame()}),this.chainsMail=new N(this,o,e,t,40,80),this.hammerGoal=this.add.circle(0,0,32,16711680,.5),this.hammer=this.physics.add.image(n,r-50,"hammer").setOrigin(.8,.8),this.resp=new o.Response,this.joystick=this.rexVirtualJoystick.add(this,{x:400,y:300,radius:100,base:this.add.circle(0,0,100,16777215,.5),thumb:this.add.circle(0,0,50,2290649224,.5),enable:!1}).setVisible(!1).on("update",this.dumpJoyStickState,this),o.onCollision(this.onCollition.bind(this)),this.input.on("pointerdown",this.pressDown,this),this.input.on("pointerup",this.pressUp,this)}dumpJoyStickState(){const{forceX:e,forceY:t}=this.joystick;this.hammer.setVelocity(e,t)}pressDown(e){if(this.currentPointer!==null)return;this.currentPointer=e;const{x:t,y:n}=e;this.joystick.setPosition(t,n).setVisible(!0).setEnable(!0),this.hammerTween=this.tweens.add({targets:[this.hammer],angle:-15,yoyo:!0,duration:150,repeat:-1,onYoyo:()=>{this.hammerBoom()}})}pressUp(e){if(this.currentPointer!==e)return;this.currentPointer=null,this.joystick.setVisible(!1).setEnable(!1),this.hammerTween!==null&&this.hammerTween.stop(),this.hammerTween=null,this.hammer.angle=0}onCollition(e,t,n,r){const l=t.data.img,d=l.getData("health")-1;l.setData("health",d),d<=0&&(o.remove(t),this.tweens.add({targets:[l],alpha:0,duration:300,onComplete:()=>{l.destroy()}}))}restartGame(){this.log.info("click restart")}hammerBoom(){const{x:e,y:t}=this.hammerGoal,n=new o.Circle(new o.Vector(e,t),32),r=new o.Response;o.testAll(n,r)}update(e,t){this.hammerGoal.x=this.hammer.x-225,this.hammerGoal.y=this.hammer.y-25}}var y=Object.assign;L.a.disablePageScroll(),c.a.useDefaults(),c.a.setLevel(c.a.OFF);const m=c.a.get("index");m.info("start");const k={global:[{key:"rexWebFontLoader",plugin:O.a,start:!0},{key:"rexButtonn",plugin:C.a,start:!0,mapping:"rexButtonn"},{key:"rexVirtualJoystick",plugin:D.a,start:!0,mapping:"rexVirtualJoystick"}],scene:[]};window.onload=()=>{window.game=new a.a.Game(y(y({},b),{plugins:k,scene:[j,U],callbacks:{preBoot:e=>{m.info("game booting start")},postBoot:e=>{m.info("game booting complete")}}}))}}},[[10,1,2]]]);
